const preTrump ={  
  'Anaheim Ducks':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.472982552,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.123532,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Arizona Coyotes':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.547784526,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.04873,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Boston Bruins':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.543036865,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.053303,
     'City Tax':0.000764,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Buffalo Sabres':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.507643997,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.088546,
     'City Tax':0.000913,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Calgary Flames':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.532879217,
     'Deductions':0.00465116,
     'Federal Tax':0.4564951,
     'Fica Tax':0,
     'State Tax':0.010086,
     'City Tax':0.00054,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Carolina Hurricanes':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.538091511,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.057977,
     'City Tax':0.001034,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Chicago BlackHawks':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.54482582,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.051689,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Colorado Avalanche':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.546937917,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.049528,
     'City Tax':0.000637,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Columbus Blue Jackets':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.51951029,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.052054,
     'City Tax':0.025539,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Dallas Stars':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.584525179,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.011989,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Detroit Red Wings':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.538158511,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.046438,
     'City Tax':0.012506,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Edmonton Oilers':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.532879217,
     'Deductions':0.00465116,
     'Federal Tax':0.4566049,
     'Fica Tax':0,
     'State Tax':0.009976,
     'City Tax':0.00054,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Florida Panthers':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.575422051,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.00903,
     'City Tax':0.012651,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Los Angeles Kings':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.472972655,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.123542,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Minnesota Wild':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.498772292,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.097742,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Montreal Canadiens':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.477069658,
     'Deductions':0.00465116,
     'Federal Tax':0.5140324,
     'Fica Tax':0,
     'State Tax':0.007985,
     'City Tax':0.000913,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Nashville Predators':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.587551674,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.008963,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'New Jersey Devils':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.511482103,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.084645,
     'City Tax':0.000976,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'New York Islanders':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.468844405,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.08869,
     'City Tax':0.039569,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'New York Rangers':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.468844405,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.08869,
     'City Tax':0.039569,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Ottawa Senators':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.478689339,
     'Deductions':0.00465116,
     'Federal Tax':0.5123693,
     'Fica Tax':0,
     'State Tax':0.008076,
     'City Tax':0.000865,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Philadelphia Flyers':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.526437961,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.035335,
     'City Tax':0.03533,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Pittsburgh Penguins':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.530925491,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.035434,
     'City Tax':0.030743,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'San Jose Sharks':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.472972655,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.123542,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'St. Louis Blues':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.524257305,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.062354,
     'City Tax':0.010492,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Tampa Bay Lightning':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.587473116,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.00891,
     'City Tax':0.00072,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Toronto Maple Leafs':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.478689339,
     'Deductions':0.00465116,
     'Federal Tax':0.5122438,
     'Fica Tax':0,
     'State Tax':0.008154,
     'City Tax':0.000913,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Vancouver Canucks':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.53461369,
     'Deductions':0.00465116,
     'Federal Tax':0.4532738,
     'Fica Tax':0,
     'State Tax':0.011572,
     'City Tax':0.00054,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Vegas Golden Knights':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.587551674,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.008963,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Washington Capitals':{  
     'League':'NHL',
     'Country':'USA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.507785174,
     'Deductions':0.00465116,
     'Federal Tax':0.3772469,
     'Fica Tax':0.02565,
     'State Tax':0.088284,
     'City Tax':0.001034,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  },
  'Winnipeg Jets':{  
     'League':'NHL',
     'Country':'CANADA',
     'IncomeFrom':0,
     'To':1000000000,
     'Net Income':0.506519512,
     'Deductions':0.00465116,
     'Federal Tax':0.4833957,
     'Fica Tax':0,
     'State Tax':0.009496,
     'City Tax':0.000589,
     'Credits':0,
     'Foreign Tax':0,
     'Foreign Tax Credit':0
  }
}


function calcTax(team, income, years, taxlaw, escrow){

    var json = {
                team : "",
                income : "",
                taxableincome : "",
                deductions : "",
                netIncome : "", federalTax : "",
                stateTax : "",
                cityTax : "",
                fica : "",
                aav: "",
                netaav : "",
                taxRate: "",
                escrow: "",
                years:""
              };
    if(escrow){
    } else {
      escrow = 0;
    }
    console.log("Gross Income : " + income)
    json.escrow = income * escrow
    income = income * (1-escrow)
    console.log("Escrow % : " + escrow)

    console.log("Years of Contract : " +years)
    var deductions = income * getDeductions(team,taxlaw)
    console.log("Deductions : " + deductions)
    var totalFedTax = getFederalTax(team, taxlaw)

    var federalTax = income * totalFedTax
    var taxableincome = income - deductions
    console.log("Taxable Income : " + taxableincome)
    var stateTax = income * getStateTax(team, taxlaw)
      console.log("State Tax : " + stateTax)
    var cityTax = income * getCityTax(team, taxlaw)
      console.log("City Tax : " + cityTax)
    var fica = income * getFicaTax(team, taxlaw)
    console.log("Fica" + fica)

    

    federalTax = federalTax 
    var totalTax = federalTax + stateTax + cityTax + fica
    console.log("Total Tax : " + totalTax )
    var netIncome = income * getNetIncome(team, taxlaw)
    console.log("Net Income : " + netIncome)

    console.log("Check : " + (totalTax+netIncome))

    var netaav = netIncome  / years
    var aav = income/years
    var taxRate = 1-netIncome/income


    json.team = team
    json.income = income
    json.taxableincome = taxableincome
    json.deductions = deductions
    json.federalTax = federalTax
    json.stateTax = stateTax
    json.cityTax = cityTax
    json.totalTax = totalTax
    json.netIncome = netIncome
    json.aav = aav
    json.netaav = netaav
    json.fica = fica
    json.taxRate = taxRate
    json.payGraph = 1 - netIncome/175740000 * 1.5
    json.years = years
    json.fica = fica

    return json
  }

  function getFederalTax(team, taxlaw){
    if(taxlaw == "preTrump"){
      var federalTax = preTrump[team]['Federal Tax']

      return federalTax
    } else {
    return federalTax = postTrump[team]['Federal Tax']
    }

  }
  
  function getFicaTax(team, taxlaw){
    if(taxlaw == "preTrump"){
      var federalTax = preTrump[team]['Fica Tax']
      return federalTax
    } else {
      return federalTax = postTrump[team]['Fica Tax']
    }

  }

  function getStateTax(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]['State Tax']
    } else {
    return postTrump[team]['State Tax']
    }
  }

  function getCityTax(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]['City Tax']
    } else {
    return postTrump[team]['City Tax']
    }
  }

  function getNetIncome(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]['Net Income']
    } else {
    return postTrump[team]['Net Income']
    }
  }

  function getForeignTax(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]['Foreign Tax']
    } else {
    return postTrump[team]['Foreign Tax']
    }
  }

  function getTaxCredit(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]['Foreign Tax Credit']
    } else {
    return postTrump[team]['Foreign Tax Credit']
    }
  }

  function getDeductions(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]["Deductions"]
    } else {
    return postTrump[team]['Deductions']
    }
  }

  function getCountry(team, taxlaw){
    if(taxlaw == "preTrump"){
      return preTrump[team]["Country"]
    } else {
    return postTrump[team]['Country']
    }
  }

  function sort(t1, t2) {
      return t2.netIncome - t1.netIncome
  }


module.exports.calcTax = calcTax;
